provider "appdynamics" {
  secret = "<your secret>"
  controller_base_url = "https://example.saas.appdynamics.com"
}

Email
resource "appdynamics_action" "my_first_email_action" {
  application_id = var.application_id
  action_type = "EMAIL"
  emails = [
    "bob@example.com",
    "sandra@example.com"
  ]
}
SMS
resource "appdynamics_action" "my-first-sms-action" {
  application_id = var.application_id
  action_type = "SMS"
  phone_number = "07421365896"
}
HTTP Request
resource "appdyanmics_action" "my-first-http-action" {
  application_id = var.application_id
  name = "My First HTTP Action"
  action_type = "HTTP_REQUEST"
  http_request_template_name = "Slack Alert - Any Channel"
  custom_template_variables = {
    channel: "#alert-channel"
  }
}


Specific Health Rule
resource "appdynamics_policy" "my_policy" {
  name = "My Policy"
  application_id = var.application_id
  action_name = "my action"
  action_type = appd_action.my-first-action.action_type
  health_rule_event_types = [
    "HEALTH_RULE_OPEN_WARNING",
    "HEALTH_RULE_OPEN_CRITICAL"]
  health_rule_scope_type = "SPECIFIC_HEALTH_RULES"
  health_rules = ["my health rule"]
}
All Health Rules
resource "appdynamics_policy" "all_health_rules_email_on_call" {
  name = "All Health Rules Email On call"
  application_id = var.application_id
  action_name = join(", ",appd_action.on-call-email-action.emails)
  action_type = appd_action.my-first-action.action_type
  health_rule_event_types = ["HEALTH_RULE_OPEN_CRITICAL"]
  health_rule_scope_type = "ALL_HEALTH_RULES"
}
